<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
        </style>
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    
    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
		   
        <h3>Orders CSV Report Generator</h3>
       <form name="orders" action="api.php" method="post" id="orders">
            From: <input type="text" name="from_date" id="from_date" title="from date" />		
			To:    <input type="text" name="to_date" id="to_date" title="to date" />	
			<br /><br />
			
			Status <div id="showresults"></div>
				   
				   <br/><br/>
				   
			CSV Output <select name="csv_output" id="csv_output" title="vendor">
                     <option value="hanes" selected>Hanes</option>
					  <option value="loom" >Fruit of the Loom</option>
					   <option value="xpert" >Xpert</option>
 
                   </select>	   
				   
				   <br/><br/>
				   
			CSV Delimiter  <select name="delimiter" id="delimiter" title="delimiter">
                     <option value="," selected>Comma</option>
					  <option value="\t" >Tabs</option>
					   <option value="|" >Pipe (|)</option>
 
                   </select>	   
		   
		   <br /><br />
		<input type="checkbox" name="ad_hoc" value="ad_hoc">Ad Hoc Query?<br>  
		<!-- Select <input type="text" name="sql_select" id="sql_select" title="sql_select"  style="width: 340px;" /><br />
		From <select name="sql_from"><option value="orders">orders</select>	<br />
		Where <input type="text" name="sql_where" id="sql_where" title="sql_where"  style="width: 340px;" /><br />	
			-->
			<textarea name="sql_query" style="width: 340px; height: 140px;"></textarea>
		   
        <p><input type="submit" id="btn btn-primary btn-lg" name="btn btn-primary btn-lg" role="button" value="Run Query"></submit></p>
      
	  </form>
	  <hr>
	  CSV Viewer:<br />
	  <div id="csv_viewer"></div>
	  
	 
	 
	  
	  
	  <br />
	  
	  
	  
	  <p><a class="btn btn-primary btn-lg" role="button" onclick="downloader();">Download &raquo;</a></p>
	  
	  
	  <hr>
	  
	  <form id="ftp" name="ftp">
	  Username: <input type="text" name="username" id="username" text="username" /><br />
	  Password: <input type="password" name="password" id="password" text="password" /><br />
	  <p><a class="btn btn-primary btn-lg" role="button" onclick="document.orders.submit()">Send to Server</a></p>
	  
	  </form>
	  
	  
	  
	   </div>
	  
    </div>

    <div class="container">
      <!-- Example row of columns -->

      </div>

      <hr>

      <footer>
        <p>&copy; Company 2014</p>
      </footer>
    </div> <!-- /container -->        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.0.min.js"><\/script>')</script>

        <script src="js/vendor/bootstrap.min.js"></script>

        <script src="js/main.js"></script>
		
		
		<script>
		//compiles the status list for the status dropdown ie. "processing", created by status.php
		$( document ).ready(function() {
			
		  $.ajax({
		        url: "status.php",
		        data: {
		            
		        },
		        type: "GET",
		        dataType: "html",
		        success: function (data) {
		            //alert(data);
		            $('#showresults').html(data);
		        },
		        error: function (xhr, status) {
		            alert("Sorry, there was a problem!");
		        },
		        complete: function (xhr, status) {
		            //$('#showresults').slideDown('slow')
		        }
		    });
		});
		
	
			
			$("#orders").submit(function(e)
			{
				
			    var postData = $(this).serializeArray();
			    var formURL = $(this).attr("action");
			    $.ajax(
			    {
			        url : formURL,
			        type: "POST",
			        data : postData,
			        success:function(data, textStatus, jqXHR) 
			        {
			            //data: return data from server
						$('#csv_viewer').html(data);
			        },
			        error: function(jqXHR, textStatus, errorThrown) 
			        {
			            //if fails      
			        }
			    });
			    e.preventDefault(); //STOP default action
			    //e.unbind(); //unbind. to stop multiple form submit.
			});
		
	
		</script>
		
		

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X');ga('send','pageview');
        </script>
    </body>
</html>
